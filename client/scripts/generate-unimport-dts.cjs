const path = require("path");
const fs = require("fs");
const minimist = require("minimist");

(() => {
  const argv = minimist(process.argv);
  const dtsPath = path.resolve(__dirname, "..", "unimport.d.ts");
  const declarations = {
    test: generateDeclarationForTest,
  }[argv.env]();
  fs.writeFileSync(dtsPath, declarations);
})();

function generateDeclarationForTest() {
  return (
    `
// This file is generated by ./scripts/generate-unimport-dts.cjs.
// This file is for test only.
export {}
declare global {
  const TodosLocalDataSource: any
  const TodosRemoteDataSource: any
}
  `.trim() + "\n"
  );
}
